<div class="indicator">
  <span
    (click)="cancel()"
    class="indicator-item badge bg-base-200 font-semibold rounded-full"
    >X</span
  >
  <form
    class="w-[80svw] flex-col gap-2"
    [formGroup]="form"
    (ngSubmit)="onSubmit()"
  >
    <h2 class="text-center">Add a trip</h2>

    <!-- trip name input -->
    <label class="form-control w-full max-w-xs m-2">
      <input
        type="text"
        placeholder="Trip name (or nickname)"
        formControlName="tripName"
        class="input input-bordered input-primary w-full max-w-xs"
      />

      @if (tripName?.invalid && (tripName?.dirty || tripName?.touched)) {
      <div class="label">
        <span class="label-text-alt">
          @if (tripName?.hasError('required')) {
          <span class="text-error-red">The name of the trip is required</span>
          }
        </span>
      </div>
      }
    </label>

    <!-- destination name input -->
    <label class="form-control w-full max-w-xs m-2">
      <app-location-autocomplete
        (placeChanged)="destinationValue = $event"
        placeholder="Destination"
      ></app-location-autocomplete>

      @if (destination?.invalid && (destination?.dirty || destination?.touched))
      {
      <div class="label">
        <span class="label-text-alt">
          @if (destination?.hasError('required')) {
          <span class="text-error-red"
            >The destination of the trip is required</span
          >
          }
        </span>
      </div>
      }
    </label>

    <div class="text-error-red p-3">{{ errorMessage }}</div>

    <div class="flex">
      <div>
        <button type="button" class="btn m-2" (click)="cancel()">Cancel</button>
      </div>
      <div
        class="tooltip"
        data-tip="Trip name and destination is required to create a trip"
      >
        <button
          class="btn m-2 btn-secondary"
          type="submit"
          [disabled]="form.invalid"
        >
          Create trip
        </button>
      </div>
    </div>
  </form>
</div>
