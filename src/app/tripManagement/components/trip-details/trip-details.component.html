<div class="prose w-svw h-svh">
  @if(user$ | async; as user){
  <app-header [user]="user"></app-header>

  <!-- THE CONTENT FOR THIS PAGE -->
  @if (trip$ | async; as trip) {
  <h1>Itinerary for {{ trip.tripName }}</h1>

  @if (selectedCurrency$ | async; as selectedCurrency) {
  <div class="flex items-center">
    <i class="material-icons">location_on</i>
    <span class="">{{ trip.destination }}</span>
  </div>
  <div>
    <i class="material-icons">account_balance_wallet</i>

    <span>Total Cost: {{ selectedCurrency.symbolNative }}{{ totalCost }}</span>
  </div>

  <h2 class="text-2xl font-lato font-medium mt-2 mb-0 p-2">The plan</h2>

  <div class="content-center relative w-[100%]">
    <div
      class="flex flex-col justify-center relative z-10 bg-base-100 p-5 pt-1"
    >
      <button
        (click)="toggleTripForm(false)"
        class="btn btn-lg btn-secondary font-lato text-3xl self-center"
      >
        Add an item
      </button>
      <div
        class="flex flex-col sm:flex-row flex-nowrap sm:flex-wrap gap-2 self-center"
      >
        @if(itinerary$ | async; as itinerary){ @for (item of itinerary; track
        item.itemId) {
        <app-itinerary-item [item]="item"></app-itinerary-item>

        } }@else {
        <p class="font-lato">
          No itinerary items. Add items to plan your trip.
        </p>
        }
      </div>
    </div>

    <div
      id="add-item-form"
      class="absolute top-0 left-0 w-[100%] h-[100%] backdrop-blur-sm z-20 hidden"
      (click)="toggleTripForm(true)"
    >
      <app-add-item
        [trip]="trip"
        [selectedCurrency]="selectedCurrency"
        id="add-trip-form"
        class="absolute top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%] bg-base-100 p-5 z-30"
        (submittedEvent)="toggleTripForm($event)"
      ></app-add-item>
    </div>
  </div>
  } } }
</div>
